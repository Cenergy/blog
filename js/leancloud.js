!function(e,t){function n(e,t){return new Promise((function(n,o){e("get","/classes/Counter?where="+encodeURIComponent(JSON.stringify({target:t}))).then((e=>e.json())).then((({results:r,code:a,error:i})=>{if(401===a)throw i;if(r&&r.length>0){var l=r[0];n(l)}else e("post","/classes/Counter",{target:t,time:0}).then((e=>e.json())).then(((e,t)=>{if(t)throw t;n(e)})).catch((e=>{console.error("Failed to create",e),o(e)}))})).catch((e=>{console.error("LeanCloud Counter Error:",e),o(e)}))}))}function o(e){return{method:"PUT",path:`/1.1/classes/Counter/${e}`,body:{time:{__op:"Increment",amount:1}}}}function r(r){var a=!0===CONFIG.web_analytics.enable,i=[],l=[],s=t.querySelector("#leancloud-site-pv-container");if(s){var c=n(r,"site-pv").then((e=>{a&&l.push(o(e.objectId));var n=t.querySelector("#leancloud-site-pv");n&&(n.innerText=e.time+1,s&&(s.style.display="inline"))}));i.push(c)}var u=t.querySelector("#leancloud-site-uv-container");if(u){var p=n(r,"site-uv").then((e=>{var n,r,i=(n="LeanCloud_UV_Flag",!((r=localStorage.getItem(n))&&(new Date).getTime()-parseInt(r,10)<=864e5||(localStorage.setItem(n,(new Date).getTime().toString()),0)));i&&a&&l.push(o(e.objectId));var s=t.querySelector("#leancloud-site-uv");s&&(s.innerText=e.time+(i?1:0),u&&(u.style.display="inline"))}));i.push(p)}var h=t.querySelector("#leancloud-page-views-container");if(h){var d=decodeURI(e.location.pathname.replace(/(?<!\/)\/*(index.html)*$/,"/")),v=n(r,d).then((e=>{if(a&&l.push(o(e.objectId)),h){var n=t.querySelector("#leancloud-page-views");n&&(n.innerText=(e.time||0)+1,h.style.display="inline")}}));i.push(v)}a&&Promise.all(i).then((()=>{l.length>0&&function(e,t){new Promise((function(n,o){e("post","/batch",{requests:t}).then((e=>{if((e=e.json()).error)throw e.error;n(e)})).catch((e=>{console.error("Failed to save visitor count",e),o(e)}))}))}(r,l)}))}var a=CONFIG.web_analytics.leancloud.app_id,i=CONFIG.web_analytics.leancloud.app_key,l=CONFIG.web_analytics.leancloud.server_url;function s(e){r(((t,n,o)=>fetch(`${e}/1.1${n}`,{method:t,headers:{"X-LC-Id":a,"X-LC-Key":i,"Content-Type":"application/json"},body:JSON.stringify(o)})))}var c="-MdYXbMMI"!==a.slice(-9)?l:`https://${a.slice(0,8).toLowerCase()}.api.lncldglobal.com`;c?s(c):fetch("https://app-router.leancloud.cn/2/route?appId="+a).then((e=>e.json())).then((e=>{e.api_server&&s("https://"+e.api_server)}))}(window,document);